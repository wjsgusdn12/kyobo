<html layout:decorate="~{layout}">
<th:block layout:fragment="css">
	<style>
		.nav {
			width: 100%;
			height: 122px;
			background-color: pink;
		}
		.footer {
			width: 100%;
			height: 302px;
			background-color: cornflowerblue;
		}
		.content {
			width: 1200px;
			margin: 0 auto;
		}
		/*ì¥ë°”êµ¬ë‹ˆ íƒ‘ */
		.cart_top_wrap {
			margin: 30px 0;
		}
		.cart_top_wrap_title {
			display: flex;
			gap: 21px;
			align-items: center;
		}
		.cart_top_wrap_left_one>span {
			font-size: 24px;
			font-weight: 700;
		}
		.location_icon {
			display: inline-block;
			width: 13px;
			height: 19px;
			background: url(https://contents.kyobobook.co.kr/resources/fo/images/common/ink/ico_locate_black@2x.png) left center no-repeat;
			background-size: 13px 19px;
		}
		.cart_top_wrap_left_two {
			width: 79px;
			height: 38px;
			border: 1px solid #ccc;
			border-radius: 13px;
			text-align: center;
			padding: 4px;
			box-sizing: border-box;
			font-size: 14px;
		}
		.active {
			background-color: #4dac27;
		}
		.inactive {
			background-color: #d5d5d5;
		}
		.cart_top_wrap_right {
			width: 369px;
			align-items: center;
			margin-left: 537px;
			display: flex;
			justify-content: space-around;
		}
		.page_icon {
			width: 20px;
			height: 20px;
			border-radius: 50%;
			color: white;
			display: inline-block;
			text-align: center;
		}
		.active_part {
			font-weight: 700;
		}
		.inactive_part {
			color: #d5d5d5;
		}
		/*ì¥ë°”êµ¬ë‹ˆ íƒ‘ */
		.cart_top_wrap_second {
			width: 896px;
			height: 44px;
			margin: 30px 0;
		}
		.cart_kyoboicon {
			width: 81px;
			height: 36px;
			border: 1px solid #d5d5d5;
			border-radius: 20px;
			box-sizing: border-box;
			padding: 9px;
		}
		/*order list tab*/
		.order_totalcount {
			width: 890px;
			height: 60px;
			border-top: 1px solid #eaeaea;
			box-sizing: border-box;
			padding: 15px 0;
		}
		.check_icon_outer {
			width: 22px;
			height: 22px;
			border-radius: 50%;
			background-color: #832383;
			display: inline-block;
			box-sizing: border-box;
			padding-left: 5px;
			margin-right: 10px;
			cursor: pointer;
		}
		.check_icon_inner {
			background: url(https://contents.kyobobook.co.kr/resources/fo/images/common/ink/ico_checkbox_active@2x.png);
			width: 10px;
			height: 7px;
			background-size: 10px 7px;
			display: inline-block;
		}
		.order_totalcount>span {
			font-size: 17px;
			font-weight: 700;
		}
		/*order list tab*/
		/*ì¹´íŠ¸ ë¦¬ìŠ¤íŠ¸ */
		.cart_list {
			display: flex;
			width: 890px;
			height: 175px;
			box-sizing: border-box;
			border-top: 1px solid #eaeaea;
		}
		.cart_list_first {
			box-sizing: border-box;
			padding: 20px 0;
		}
		.cart_list_second {
			box-sizing: border-box;
			padding: 20px 0;
			position: relative;
			width: 486px;
			border-right: 1px solid #eaeaea;
		}
		.book_img_div {
			display: inline-block;
		}
		.book_img_div>img {
			width: 82px;
		}
		.cart_list_second_title {
			font-size: 15px;
			font-weight: 700;
			position: absolute;
			left: 104px;
		}
		.cart_list_second_price {
			font-weight: 600;
			color: #6a6a6a;
			position: absolute;
			left: 103px;
			top: 51px;
		}
		.cart_list_thrid {
			border-right: 1px solid #eaeaea;
			width: 140px;
			box-sizing: border-box;
			padding: 44px 30px;
		}
		.cart_list_thrid_price {
			font-weight: 700;
		}
		.quantity_check {
			display: flex;
		}
		.quantity_check>button {
			width: 27px;
			height: 30px;
			border-top: 1px solid #ccc;
			border-bottom: 1px solid #ccc;
			background: white;
			cursor: pointer;
		}
		.quantity_check>input {
			width: 27px;
			height: 26px;
			border-top: 1px solid #ccc;
			border-bottom: 1px solid #ccc;
			border-right: none;
			border-left: none;
			text-align: center;
		}
		.left_btn {
			border-radius: 4px 0 0 4px;
			border-right: none;
			border-left: 1px solid #ccc;
		}
		.right_btn {
			border-left: none;
			border-radius: 0 4px 4px 0;
			border-right: 1px solid #ccc;
		}
		.cart_list_fourth_left {
			width: 200px;
			box-sizing: border-box;
			padding: 25px;
		}
		.cart_list_fourth_right {
			margin-top: 11px;
		}
		.sameDay_delivary {
			width: 59px;
			height: 26px;
			font-size: 12px;
			background: #ededf7;
			border-radius: 20px;
			color: #474c98;
			box-sizing: border-box;
			padding: 6px;
			margin-bottom: 10px;
		}
		.cart_list_fourth {
			display: flex;
			width: 222px;
		}
		.cart_list_fourth_left>span {
			font-size: 14px;
			font-weight: 700;
		}
		.cart_list_deleteBtn {
			width: 21px;
			height: 21px;
			display: inline-block;
			background: url(https://contents.kyobobook.co.kr/resources/fo/images/common/ink/btn_delete_ord@2x.png);
			background-size: 21px 21px;
			cursor: pointer;
		}
		/*ì¹´íŠ¸ ë¦¬ìŠ¤íŠ¸ */
		.payment_promotion>img {
			width: 890px;
			height: auto;
		}
		.cart_note>img {
			width: 890px;
			height: auto;
		}
		/*ê²°ì œ ì •ë³´ ì•Œë¦¼ë°•ìŠ¤ */
		.payment_info {
			width: 273px;
			height: 252px;
			box-sizing: border-box;
			padding: 20px;
			border: 1px solid #ccc;
			border-radius: 20px;
			position: fixed;
			top: 229px;
			right: 67px;
			background: white;
		}
		.payment_info_first {
			height: 73px;
			border-bottom: 1px solid;
		}
		.payment_info_first_part {
			display: flex;
			justify-content: space-around;
			margin: 10px 0;
		}
		.payment_info_first_price {
			font-weight: 700;
		}
		.payment_info_second {
			height: 56px;
			display: flex;
			justify-content: space-around;
			align-items: center;
		}
		.payment_info_second>span {
			font-weight: 700;
		}
		.payment_info_second_price {
			font-size: 20px
		}
		.payment_info_orderBtn {
			background: #832383;
			border: none;
			color: white;
			width: 130px;
			height: 40px;
			border-radius: 10px;
			margin-left: 52px;
			margin-top: 16px;
			cursor: pointer;
		}
		/*ê²°ì œ ì •ë³´ ì•Œë¦¼ë°•ìŠ¤ */
	</style>
</th:block>
<th:block layout:fragment="script">
	<script>
		//ì±… ì²´í¬ 
		document.querySelectorAll('.check_icon_outer').forEach(function (item) {
			item.addEventListener('click', function () {
				const color = window.getComputedStyle(item).backgroundColor;
				const inner = item.querySelector('.check_icon_inner'); // ìì‹ ìš”ì†Œ ì„ íƒ

				if (color === 'rgb(131, 35, 131)') { // '#832383'ì€ rgbë¡œ ë°”ê¿”ì•¼ í•¨
					item.style.border = '2px solid #eaeaea'
					item.style.backgroundColor = 'white';
					if (inner) {
						inner.style.backgroundImage = 'url("https://contents.kyobobook.co.kr/resources/fo/images/common/ink/ico_checkbox@2x.png")';
					}
				} else {
					item.style.border = 'none';
					item.style.backgroundColor = '#832383';
					if (inner) {
						inner.style.backgroundImage = 'url("https://contents.kyobobook.co.kr/resources/fo/images/common/ink/ico_checkbox_active@2x.png")';
					}
				}
			});
		});

		//ì¥ë°”êµ¬ë‹ˆ ìƒí’ˆì„ ì œê±°
		document.querySelectorAll('.cart_list_deleteBtn').forEach(function (item) {
			item.addEventListener('click', function (event) {
				const isConfirmed = confirm("ì„ íƒ ìƒí’ˆì„ ì‚­ì œí•˜ì‹œê² ì–´ìš”?");
				if (!isConfirmed) {
					event.preventDefault(); // í´ë¦­ ë™ì‘ ë§‰ê¸° (ì˜ˆ: form ì „ì†¡ ë“±)
				}
				// í™•ì¸ ëˆŒë €ì„ ê²½ìš°ì—ëŠ” ê·¸ëƒ¥ ì§„í–‰
			});
		});

		//ìƒí’ˆìˆ˜ëŸ‰ ë³€ê²½ í›„ ì´ ê°€ê²© ë³€ê²½ (-)
		document.querySelectorAll('.left_btn').forEach(function (item) {
		  item.addEventListener('click', function () {
		    const countCheck = item.parentElement.querySelector('input');
		    let countValue = parseInt(countCheck.value);

		    if (countValue > 1) {
		      countValue--;
		      countCheck.value = countValue;
		    } else {
		      return; // 1ë³´ë‹¤ ì‘ì•„ì§ˆ ìˆ˜ ì—†ìŒ
		    }

		    // ë¶€ëª¨ cart_list ìš”ì†Œ ì°¾ê¸°
		    const cartList = item.closest('.cart_list');

		    // ì„ íƒ ì—¬ë¶€ í™•ì¸
		    const checkIcon = cartList.querySelector('.check_icon_outer');
		    const bgColor = window.getComputedStyle(checkIcon).backgroundColor;

		    // ì„ íƒëœ í•­ëª©ì¼ ê²½ìš°ë§Œ ê³„ì‚° ìˆ˜í–‰
		    if (bgColor === 'rgb(131, 35, 131)') {
		      const unitPriceText = cartList.querySelector('.cart_list_second_price').textContent;
		      const unitPrice = parseInt(unitPriceText.replace(/[^\d]/g, ''));
		      const totalPrice = unitPrice * countValue;

		      const priceDisplay = cartList.querySelector('.cart_list_thrid_price');
		      priceDisplay.textContent = totalPrice.toLocaleString() + 'ì›';

		      // ê²°ì œ ê¸ˆì•¡ ë° ìˆ˜ëŸ‰ ì—…ë°ì´íŠ¸
		      updateTotalPrice();
		      updateTotalQuantity();
		    } else {
		      // ì„ íƒ ì•ˆ ëœ í•­ëª©ì€ ê°€ê²©ë§Œ ê³„ì‚°
		      const unitPriceText = cartList.querySelector('.cart_list_second_price').textContent;
		      const unitPrice = parseInt(unitPriceText.replace(/[^\d]/g, ''));
		      const totalPrice = unitPrice * countValue;

		      const priceDisplay = cartList.querySelector('.cart_list_thrid_price');
		      priceDisplay.textContent = totalPrice.toLocaleString() + 'ì›';

		      console.log('ì„ íƒë˜ì§€ ì•Šì€ í•­ëª©ì…ë‹ˆë‹¤.');
		    }
		  });
		});

		//ìƒí’ˆìˆ˜ëŸ‰ ë³€ê²½ í›„ ì´ ê°€ê²© ë³€ê²½ (+) ** ë‹¤ì‹œ ë³µìŠµ 
		document.querySelectorAll('.right_btn').forEach(function (item) {
			item.addEventListener('click', function () {
				const countInput = item.parentElement.querySelector('input');
				let countvalue = parseInt(countInput.value);
				countvalue++;
				countInput.value = countvalue;

				const cartList = item.closest('.cart_list');

				// ì„ íƒ ì—¬ë¶€ í™•ì¸
				const checkIcon = cartList.querySelector('.check_icon_outer');
				const bgColor = window.getComputedStyle(checkIcon).backgroundColor;

				// ì„ íƒëœ í•­ëª©ì¼ ê²½ìš°ë§Œ ê³„ì‚° ìˆ˜í–‰
				if (bgColor === 'rgb(131, 35, 131)') {
					const cartPrice = cartList.querySelector('.cart_list_second_price').textContent;
					const unitPrice = parseInt(cartPrice.replace(/[^\d]/g, ''));
					const totalPrice = unitPrice * countvalue;
					const priceDisplay = cartList.querySelector('.cart_list_thrid_price');
					priceDisplay.textContent = totalPrice.toLocaleString() + 'ì›';

					// ê²°ì œ ì˜ˆì • ê¸ˆì•¡ ì—…ë°ì´íŠ¸
					updateTotalPrice();

					// ğŸ‘‰ ì—¬ê¸°ì„œ ì „ì²´ ìˆ˜ëŸ‰ í•©ê³„ë„ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆìŒ
					updateTotalQuantity(); // ì´ëŸ° í•¨ìˆ˜ë¡œ ë”°ë¡œ ê´€ë¦¬ ì¶”ì²œ
				} else {
					//ì„ íƒ ë˜ì§€ ì•Šì•˜ì„ë•ŒëŠ” ìˆ˜ëŸ‰ì²´í¬ ìœ„ì— ê°€ê²©ë§Œ ë³€ë™ì´ ì¼ì–´ë‚¨ 
					const cartPrice = cartList.querySelector('.cart_list_second_price').textContent;
					const unitPrice = parseInt(cartPrice.replace(/[^\d]/g, ''));
					const totalPrice = unitPrice * countvalue;
					const priceDisplay = cartList.querySelector('.cart_list_thrid_price');
					priceDisplay.textContent = totalPrice.toLocaleString() + 'ì›';
					console.log('ì„ íƒëœ í•­ëª©ì´ ì•„ë‹˜');
				}
			});
		});

		//ê²°ì œ ì˜ˆì • ê¸ˆì•¡ 
		function updateTotalPrice() {
			let total = 0;

			// ê° ê°€ê²©ì„ ê°€ì ¸ì™€ì„œ í•©ì‚°
			document.querySelectorAll('.cart_list_thrid_price').forEach(function (item) {
				const priceText = item.textContent;
				// ìˆ«ìë§Œ ì¶”ì¶œ
				const price = parseInt(priceText.replace(/[^\d]/g, ''));

				// ê°€ê²©ì„ ì´í•©ì— ë”í•˜ê¸°
				total += price;
			});

			// ê²°ì œ ê¸ˆì•¡ì„ ì—…ë°ì´íŠ¸
			const totalDisplay = document.querySelector('.payment_info_first_price');
			const paymentPrice = document.querySelector('.payment_info_second_price');
			if (totalDisplay) {
				totalDisplay.textContent = total.toLocaleString() + 'ì›'; // ì²œ ë‹¨ìœ„ë¡œ ì‰¼í‘œ ì¶”ê°€
				paymentPrice.textContent = total.toLocaleString();
			}
		}

		// ìˆ˜ëŸ‰ ë³€í™” ** ë‹¤ì‹œ ë³µìŠµ 
		function updateTotalQuantity() {
		  let totalQuantity = 0;

		  document.querySelectorAll('.cart_list').forEach(function(cartItem) {
		    const checkIcon = cartItem.querySelector('.check_icon_outer');
		    const bgColor = window.getComputedStyle(checkIcon).backgroundColor;

		    if (bgColor === 'rgb(131, 35, 131)') {
		      const input = cartItem.querySelector('.quantity_check input');
		      const count = parseInt(input.value);
		      totalQuantity += count;
		    }
		  });

		  // ê²°ê³¼ ì¶œë ¥
		  const quantityDisplay = document.querySelector('.payment_info_count');
		  if (quantityDisplay) {
		    quantityDisplay.textContent = totalQuantity.toLocaleString();
		  }
		}
	</script>
</th:block>
<div layout:fragment="nav" class="nav"></div>
<div layout:fragment="content" class="content">
	<!--cart top ë¶€ë¶„ -->
	<div class="cart_top_wrap">
		<div class="cart_top_wrap_title">
			<div class="cart_top_wrap_left_one">
				<span>ì¥ë°”êµ¬ë‹ˆ</span>
				<span>(</span>
				<span>1</span>
				<span>)</span>
			</div>
			<div class="cart_top_wrap_left_two">
				<span class="location_icon"></span>
				ìœ¤ì§€ìˆ˜
			</div>
			<div class="cart_top_wrap_right">
				<div>
					<div class="page_icon active">1</div>
					<span class="active_part">ì¥ë°”êµ¬ë‹ˆ</span>
				</div>
				<div>
					<div class="page_icon inactive">2</div>
					<span class="inactive_part">ì£¼ë¬¸ / ê²°ì œ</span>
				</div>
				<div>
					<div class="page_icon inactive">3</div>
					<span class="inactive_part">ì£¼ë¬¸ ì™„ë£Œ</span>
				</div>
			</div>
		</div>
		<div class="cart_top_wrap_second">
			<div class="cart_kyoboicon">êµë³´ë¬¸ê³ </div>
		</div>
	</div>
	<!--cart top ë¶€ë¶„ -->
	<!--cart content ë¶€ë¶„ -->
	<div class="cart_content_wrap">
		<div class="order_list_tab">
			<div class="order_totalcount">
				<div class="check_icon_outer">
					<span class="check_icon_inner"></span>
				</div>
				<span>êµë³´ë¬¸ê³ </span>
			</div>
			<!--ì¥ë°”êµ¬ë‹ˆ ì±… ë¦¬ìŠ¤íŠ¸ -->
			<div class="cart_list_wrap">
				<div class="cart_list">
					<div class="cart_list_first">
						<div class="check_icon_outer">
							<span class="check_icon_inner"></span>
						</div>
					</div>
					<div class="cart_list_second">
						<div class="book_img_div">
							<img th:src="@{/img/ì†Œë…„ì´ì˜¨ë‹¤ .jpg}">
						</div>
						<span class="cart_list_second_title">[êµ­ë‚´ë„ì„œ] ì†Œë…„ì´ ì˜¨ë‹¤ </span><br>
						<span class="cart_list_second_price">13,500 ì›</span>
					</div>
					<div class="cart_list_thrid">
						<span class="cart_list_thrid_price">13,5000ì›</span>
						<div class="quantity_check">
							<button class="left_btn">-</button>
							<input value="1">
							<button class="right_btn">+</button>
						</div>
					</div>
					<div class="cart_list_fourth">
						<div class="cart_list_fourth_left">
							<div class="sameDay_delivary">ë‹¹ì¼ ë°°ì†¡</div>
							<span>ì˜¤ëŠ˜</span>
							<span>(5/8)</span>
							<span>ë°°ì†¡</span>
						</div>
						<div class="cart_list_fourth_right">
							<span class="cart_list_deleteBtn"></span>
						</div>
					</div>
				</div>
				<div class="cart_list">
					<div class="cart_list_first">
						<div class="check_icon_outer">
							<span class="check_icon_inner"></span>
						</div>
					</div>
					<div class="cart_list_second">
						<div class="book_img_div">
							<img th:src="@{/img/ì†Œë…„ì´ì˜¨ë‹¤ .jpg}">
						</div>
						<span class="cart_list_second_title">[êµ­ë‚´ë„ì„œ] ì†Œë…„ì´ ì˜¨ë‹¤ </span><br>
						<span class="cart_list_second_price">13,500 ì›</span>
					</div>
					<div class="cart_list_thrid">
						<span class="cart_list_thrid_price">13,5000ì›</span>
						<div class="quantity_check">
							<button class="left_btn">-</button>
							<input value="4" class="cart_list_countCheck">
							<button class="right_btn">+</button>
						</div>
					</div>
					<div class="cart_list_fourth">
						<div class="cart_list_fourth_left">
							<div class="sameDay_delivary">ë‹¹ì¼ ë°°ì†¡</div>
							<span>ì˜¤ëŠ˜</span>
							<span>(5/8)</span>
							<span>ë°°ì†¡</span>
						</div>
						<div class="cart_list_fourth_right">
							<span class="cart_list_deleteBtn"></span>
						</div>
					</div>
				</div>
			</div>
			<!--ì¥ë°”êµ¬ë‹ˆ ì±… ë¦¬ìŠ¤íŠ¸ -->
		</div>
		<div class="payment_info">
			<div class="payment_info_first">
				<div class="payment_info_first_part">
					<span>ìƒí’ˆ ê¸ˆì•¡</span>
					<div>
						<span class="payment_info_first_price">27,000</span>
						<span>ì›</span>
					</div>
				</div>
				<div class="payment_info_first_part">
					<span>ë°°ì†¡ë¹„</span>
					<span>+0ì›</span>
				</div>
			</div>
			<div class="payment_info_second">
				<span>ê²°ì œ ì˜ˆì • ê¸ˆì•¡</span>
				<span class="payment_info_second_price">27,000</span>
				<span>ì›</span>
			</div>
			<button class="payment_info_orderBtn">
				ì£¼ë¬¸í•˜ê¸°
				<span class="payment_info_count">2</span>
			</button>
		</div>
		<div class="payment_promotion">
			<img th:src="@{/img/á„€á…§á†¯á„Œá…¦ á„‘á…³á„…á…©á„†á…©á„‰á…§á†«.png}">
		</div>
		<div class="cart_note">
			<img th:src="@{/img/ì¥ë°”êµ¬ë‹ˆ.png}">
		</div>
	</div>
	<!--cart content ë¶€ë¶„ -->
</div>
<div layout:fragment="footer" class="footer"></div>

</html>